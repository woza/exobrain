package input

import(
	"golang.org/x/crypto/ssh/terminal"
	"strings"
	"syscall"
	"errors"
)

func Password( src *bufio.Reader ) (string, error){
	stdin_fd := int(syscall.Stdin)
	if terminal.IsTerminal(stdin_fd){
		raw,err := terminal.ReadPassword(stdin_fd)
		if err != nil{
			return "",err
		}
		return string(raw),err
	}
	// Stdin piped in from file or other mechanism
	return src.ReadString('\n')
}
